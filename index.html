<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown to Bali</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. Reset and Base Styles --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            color: #ffffff;
            min-height: 100vh;
            display: grid;
            place-items: center;
            text-align: center;
            padding: 20px;
            overflow: hidden;
            background: linear-gradient(135deg, #0f2027, #2c5364);
            transition: background 2.5s linear; 
        }

        /* --- 2. Day/Night Cycle & Decorations Container --- */
        #celestial-container {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1; /* Behind the content */
            pointer-events: none;
        }
        
        #sun, #moon {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            transition: all 1s linear; 
            transform: translate(-50%, -50%);
            opacity: 0;
        }
        
        #sun {
            background: #FFD700;
            box-shadow: 0 0 40px #FFD700, 0 0 60px #FFD700;
        }
        
        #moon {
            background: #E6E6E6;
            box-shadow: 0 0 20px #E6E6E6, 0 0 30px #E6E6E6;
        }

        /* NEW: Bird Styles */
        .bird {
            position: absolute;
            width: 20px; /* Small size for a distant bird */
            height: 20px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M21 16v-2.385l-7.25-3.625 2.25-2.25c.385-.385.577-.827.577-1.327 0-.5-.192-.942-.577-1.327-.385-.385-.827-.577-1.327-.577-.5 0-.942.192-1.327.577l-4.75 4.75-2.25-2.25c-.385-.385-.827-.577-1.327-.577-.5 0-.942.192-1.327.577l-5.75 5.75V16c-.531 0-1.031.218-1.406.594-.375.375-.594.875-.594 1.406 0 .531.218 1.031.594 1.406.375.375.875.594 1.406.594h17c.531 0 1.031-.218 1.406-.594.375-.375.594-.875.594-1.406 0-.531-.218-1.031-.594-1.406-.375-.375-.875-.594-1.406-.594z"/></svg>') no-repeat center center;
            background-size: contain;
            transition: opacity 2s ease-in-out; /* Smooth fade in/out */
            opacity: 0; /* Hidden by default */
            animation: birdFly 15s linear infinite; /* Animation defined below */
        }
        @keyframes birdFly {
            0% { transform: translateX(-10vw) translateY(50vh) scale(0.8); opacity: 0; }
            5% { opacity: 1; }
            95% { opacity: 1; }
            100% { transform: translateX(110vw) translateY(30vh) scale(1.2); opacity: 0; }
        }

        /* NEW: Star Styles */
        .star {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            opacity: 0; /* Hidden by default, JS controls opacity for twinkle and fade */
            animation: twinkle 5s infinite ease-in-out;
            transition: opacity 2s ease-in-out; /* Smooth fade in/out */
        }
        @keyframes twinkle {
            0%, 100% { opacity: 0.1; }
            50% { opacity: 1; }
        }


        /* --- 3. Main Container --- */
        .container {
            max-width: 800px;
            width: 100%;
            position: relative;
            z-index: 2; /* On top of the celestial and decorations */
        }

        h1, p { text-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        h1 { font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem; }
        p { font-size: 1.1rem; font-weight: 300; margin-bottom: 2rem; }

        /* --- 4. Countdown Timer Styles --- */
        .countdown-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1.5rem;
        }

        .time-box {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem 2rem;
            min-width: 140px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .number { display: block; font-size: 3.5rem; font-weight: 600; }
        .label { font-size: 0.9rem; font-weight: 300; text-transform: uppercase; }
        
        /* --- 5. Expiry Message --- */
        #expiry-message { font-size: 2.5rem; font-weight: 700; color: #4ade80; }

        /* --- 6. Responsive Design --- */
        @media (max-width: 600px) {
            h1 { font-size: 2rem; }
            p { font-size: 1rem; }
            .countdown-container { gap: 1rem; }
            .time-box { min-width: 100px; padding: 1rem 1.2rem; }
            .number { font-size: 2.5rem; }
            .label { font-size: 0.75rem; }
            
            #sun, #moon {
                width: 30px;
                height: 30px;
            }
        }
        
    </style>
</head>
<body>

    <div id="celestial-container">
        <div id="sun"></div>
        <div id="moon"></div>
        <!-- Decorations will be added here by JavaScript --></div>

    <main class="container">
        <h1>Countdown to Bali</h1>
        <p>Time remaining until December 22nd, 11:55 AM (CET)</p>

        <div class="countdown-container" id="countdown-container">
            <div class="time-box">
                <span class="number" id="days">00</span>
                <span class="label">Days</span>
            </div>
            <div class="time-box">
                <span class="number" id="hours">00</span>
                <span class="label">Hours</span>
            </div>
            <div class="time-box">
                <span class="number" id="minutes">00</span>
                <span class="label">Minutes</span>
            </div>
            <div class="time-box">
                <span class="number" id="seconds">00</span>
                <span class="label">Seconds</span>
            </div>
        </div>
        
        <div id="expiry-message" style="display: none;">
            We've arrived! ðŸ¥³
        </div>
        
    </main>

    <script>
        // --- 1. Set the Target Date ---
        const currentYear = new Date().getFullYear();
        let targetDate = new Date(`2025-12-22T11:55:00+01:00`); 
        
        if (targetDate - new Date() < 0) {
            targetDate = new Date(`${currentYear + 1}-12-22T11:55:00+01:00`); 
        }

        // --- 2. Get DOM Elements ---
        const daysEl = document.getElementById('days');
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        const countdownContainer = document.getElementById('countdown-container');
        const expiryMessage = document.getElementById('expiry-message');
        const bodyEl = document.body;
        
        const sunEl = document.getElementById('sun');
        const moonEl = document.getElementById('moon');
        const celestialContainer = document.getElementById('celestial-container'); // Get the container for decorations

        // --- 3. Day/Night Cycle Logic ---
        
        const skyColors = {
            midnight: { top: 'rgb(0, 5, 20)', bottom: 'rgb(0, 0, 0)' },         // 0:00 - Totally dark
            sunrise:  { top: 'rgb(135, 206, 250)', bottom: 'rgb(255, 170, 80)' }, // 6:00 - Blue sky, orange horizon
            noon:     { top: 'rgb(30, 144, 255)', bottom: 'rgb(135, 206, 250)' }, // 12:00 - Brightest blue
            sunset:   { top: 'rgb(255, 140, 0)', bottom: 'rgb(50, 0, 70)' }     // 18:00 - Orange/purple evening
        };

        function interpolateColor(color1, color2, percent) {
            const [r1, g1, b1] = color1.match(/\d+/g).map(Number);
            const [r2, g2, b2] = color2.match(/\d+/g).map(Number);
            const r = Math.round(r1 + (r2 - r1) * percent);
            const g = Math.round(g1 + (g2 - g1) * percent);
            const b = Math.round(b1 + (b2 - b1) * percent);
            return `rgb(${r}, ${g}, ${b})`;
        }

        function updateSky(totalMinutes) {
            let c1, c2, percent;
            
            if (totalMinutes < 360) { // Midnight to Sunrise (0:00 - 6:00)
                percent = totalMinutes / 360;
                c1 = skyColors.midnight;
                c2 = skyColors.sunrise;
            } else if (totalMinutes < 720) { // Sunrise to Noon (6:00 - 12:00)
                percent = (totalMinutes - 360) / 360;
                c1 = skyColors.sunrise;
                c2 = skyColors.noon;
            } else if (totalMinutes < 1080) { // Noon to Sunset (12:00 - 18:00)
                percent = (totalMinutes - 720) / 360;
                c1 = skyColors.noon;
                c2 = skyColors.sunset;
            } else { // Sunset to Midnight (18:00 - 24:00)
                percent = (totalMinutes - 1080) / 360;
                c1 = skyColors.sunset;
                c2 = skyColors.midnight;
            }

            const topColor = interpolateColor(c1.top, c2.top, percent);
            const bottomColor = interpolateColor(c1.bottom, c2.bottom, percent);
            bodyEl.style.background = `linear-gradient(to bottom, ${topColor}, ${bottomColor})`;
        }
        
        function updateCelestialBodies(totalMinutes) {
            if (totalMinutes >= 360 && totalMinutes < 1080) {
                // --- DAYTIME (6am to 6pm) ---
                const percentOfDay = (totalMinutes - 360) / 720; // 0.0 to 1.0
                const angle = (1 - percentOfDay) * Math.PI; // PI (left) to 0 (right)
                
                const x = 50 + 50 * Math.cos(angle); 
                const y = 100 - 85 * Math.sin(angle); 
                
                sunEl.style.left = x + 'vw';
                sunEl.style.top = y + 'vh';
                sunEl.style.opacity = '1';
                moonEl.style.opacity = '0';

            } else {
                // --- NIGHTTIME (6pm to 6am) ---
                let nightMinutes = (totalMinutes >= 1080) 
                    ? totalMinutes - 1080 // 6pm to midnight
                    : totalMinutes + (1440 - 1080); // midnight to 6am
                
                const percentOfNight = nightMinutes / 720; // 0.0 to 1.0
                const angle = (1 - percentOfNight) * Math.PI; // PI (left) to 0 (right)
                
                const x = 50 + 50 * Math.cos(angle);
                const y = 100 - 85 * Math.sin(angle);
                
                moonEl.style.left = x + 'vw';
                moonEl.style.top = y + 'vh';
                moonEl.style.opacity = '1';
                sunEl.style.opacity = '0';
            }
        }

        // --- NEW: Decoration Logic ---

        let birds = [];
        const numBirds = 3; // Number of birds to display

        function createBirds() {
            for (let i = 0; i < numBirds; i++) {
                const bird = document.createElement('div');
                bird.className = 'bird';
                // Randomize initial position and animation delay slightly
                bird.style.left = Math.random() * 100 + 'vw';
                bird.style.top = Math.random() * 50 + 'vh';
                bird.style.animationDelay = `${Math.random() * 5}s`;
                celestialContainer.appendChild(bird);
                birds.push(bird);
            }
        }

        function toggleBirds(show) {
            birds.forEach(bird => {
                bird.style.opacity = show ? '1' : '0';
            });
        }

        let stars = [];
        const numStars = 100; // Number of stars to display

        function createStars() {
            for (let i = 0; i < numStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + 'vw';
                star.style.top = Math.random() * 100 + 'vh';
                const size = Math.random() * 2 + 1; // 1px to 3px
                star.style.width = size + 'px';
                star.style.height = size + 'px';
                star.style.animationDelay = `${Math.random() * 5}s`;
                celestialContainer.appendChild(star);
                stars.push(star);
            }
        }

        function toggleStars(show) {
            stars.forEach(star => {
                star.style.opacity = show ? '1' : '0';
            });
        }


        // --- 5. Main Update Function ---
        function updateCountdown() {
            // --- A. Countdown Timer Logic ---
            const nowForCountdown = new Date();
            const diff = targetDate - nowForCountdown;

            if (diff <= 0) {
                clearInterval(timerInterval);
                countdownContainer.style.display = 'none';
                expiryMessage.style.display = 'block';
                bodyEl.className = 'sunny-active'; 
                bodyEl.style.background = `linear-gradient(120deg, #89f7fe, #fdfc47)`;
                
                // Ensure decorations are hidden on expiry
                toggleBirds(false);
                toggleStars(false);
                return;
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            daysEl.innerText = days.toString().padStart(2, '0');
            hoursEl.innerText = hours.toString().padStart(2, '0');
            minutesEl.innerText = minutes.toString().padStart(2, '0');
            secondsEl.innerText = seconds.toString().padStart(2, '0');
            
            // --- B. Day/Night Cycle Logic ---
            const nowForCycle = new Date();
            const currentHours = nowForCycle.getHours();
            const currentMinutes = nowForCycle.getMinutes();
            const totalMinutes = currentHours * 60 + currentMinutes;
            
            updateSky(totalMinutes);
            updateCelestialBodies(totalMinutes);

            // --- C. NEW: Decoration Toggling ---
            // Show birds from 6 AM (360 min) to 6 PM (1080 min)
            const isDaytime = totalMinutes >= 360 && totalMinutes < 1080;
            toggleBirds(isDaytime);
            toggleStars(!isDaytime); // Show stars at night
        }

        // --- 6. Run the Timer and Create Decorations ---
        const timerInterval = setInterval(updateCountdown, 1000);
        createBirds(); // Create bird elements once
        createStars(); // Create star elements once
        updateCountdown(); // Run it once immediately on page load

    </script>

</body>
</html>

